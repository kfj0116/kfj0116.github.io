<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Questions,">










<meta name="description" content="Record some React questions.">
<meta name="keywords" content="Questions">
<meta property="og:type" content="article">
<meta property="og:title" content="Questions - React">
<meta property="og:url" content="http://yoursite.com/2019/11/07/react-questions/index.html">
<meta property="og:site_name" content="Fanjia Kong">
<meta property="og:description" content="Record some React questions.">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://yoursite.com/2019/11/07/react-questions/lifecycle.png">
<meta property="og:updated_time" content="2019-12-08T16:02:19.390Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Questions - React">
<meta name="twitter:description" content="Record some React questions.">
<meta name="twitter:image" content="http://yoursite.com/2019/11/07/react-questions/lifecycle.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/11/07/react-questions/">





  <title>Questions - React | Fanjia Kong</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Fanjia Kong</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Frontend Developer</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/07/react-questions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fanjia Kong">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fanjia Kong">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Questions - React</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-07T15:43:33+02:00">
                2019-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Record some React questions.</p>
<a id="more"></a>

<h2 id="How-does-React-work"><a href="#How-does-React-work" class="headerlink" title="How does React work?"></a>How does React work?</h2><p>React creates a virtual DOM. When state changes in a component it firstly runs a diff algorithm, which identifies what has changed in the virtual DOM. The second step is reconciliation, where it updates the DOM with the results of diff.</p>
<h3 id="create-a-virtual-DOM"><a href="#create-a-virtual-DOM" class="headerlink" title="create a virtual DOM"></a>create a virtual DOM</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">// element.js</span><br><span class="line"></span><br><span class="line">// Virtual DOM</span><br><span class="line">class Element &#123;</span><br><span class="line">    constructor(type, props, children) &#123;</span><br><span class="line">        this.type = type;</span><br><span class="line">        this.props = props;</span><br><span class="line">        this.children = children;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// Create Virtual DOM，return object</span><br><span class="line">function createElement(type, props, children) &#123;</span><br><span class="line">    return new Element(type, props, children);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// render Virtual DOM to Real DOM</span><br><span class="line">function render(domObj) &#123;</span><br><span class="line">    // create element according to type</span><br><span class="line">    let el = document.createElement(domObj.type);</span><br><span class="line"></span><br><span class="line">    // set attr</span><br><span class="line">    for (let key in domObj.props) &#123;</span><br><span class="line">        // 设置属性的方法</span><br><span class="line">        setAttr(el, key, domObj.props[key]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // traverse child</span><br><span class="line">    domObj.children.forEach(child =&gt; &#123;</span><br><span class="line">        child = (child instanceof Element) ? render(child) : document.createTextNode(child);</span><br><span class="line">        // add child to element</span><br><span class="line">        el.appendChild(child);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    return el;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// set attribute</span><br><span class="line">function setAttr(node, key, value) &#123;</span><br><span class="line">    switch(key) &#123;</span><br><span class="line">        case &apos;value&apos;:</span><br><span class="line">            if (node.tagName.toLowerCase() === &apos;input&apos; ||</span><br><span class="line">                node.tagName.toLowerCase() === &apos;textarea&apos;) &#123;</span><br><span class="line">                node.value = value;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                node.setAttribute(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">            break;</span><br><span class="line">        case &apos;style&apos;:</span><br><span class="line">            node.style.cssText = value;</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            node.setAttribute(key, value);</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// insert element to page</span><br><span class="line">function renderDom(el, target) &#123;</span><br><span class="line">    target.appendChild(el);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export &#123;</span><br><span class="line">    Element,</span><br><span class="line">    createElement,</span><br><span class="line">    render,</span><br><span class="line">    setAttr,</span><br><span class="line">    renderDom</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// index.js</span><br><span class="line"></span><br><span class="line">import &#123; createElement, render, renderDom &#125; from &apos;./element&apos;;</span><br><span class="line"></span><br><span class="line">let virtualDom = createElement(&apos;ul&apos;, &#123;class: &apos;list&apos;&#125;, [</span><br><span class="line">    createElement(&apos;li&apos;, &#123;class: &apos;item&apos;&#125;, [&apos;A&apos;]),</span><br><span class="line">    createElement(&apos;li&apos;, &#123;class: &apos;item&apos;&#125;, [&apos;B&apos;]),</span><br><span class="line">    createElement(&apos;li&apos;, &#123;class: &apos;item&apos;&#125;, [&apos;C&apos;])</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">let el = render(virtualDom);</span><br><span class="line">renderDom(el, document.getElementById(&apos;root&apos;));</span><br></pre></td></tr></table></figure>

<h3 id="diff-algorithm"><a href="#diff-algorithm" class="headerlink" title="diff algorithm"></a>diff algorithm</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">// diff.js</span><br><span class="line"></span><br><span class="line">function diff(oldTree, newTree) &#123;</span><br><span class="line">    let patches = &#123;&#125;;</span><br><span class="line">    let index = 0;</span><br><span class="line">    walk(oldTree, newTree, index, patches);</span><br><span class="line"></span><br><span class="line">    return patches;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function walk(oldNode, newNode, index, patches) &#123;</span><br><span class="line">    // every element has a patch</span><br><span class="line">    let current = [];</span><br><span class="line"></span><br><span class="line">    if (!newNode) &#123; // rule1</span><br><span class="line">        current.push(&#123; type: &apos;REMOVE&apos;, index &#125;);</span><br><span class="line">    &#125; else if (isString(oldNode) &amp;&amp; isString(newNode)) &#123;</span><br><span class="line">        if (oldNode !== newNode) &#123;</span><br><span class="line">            current.push(&#123; type: &apos;TEXT&apos;, text: newNode &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else if (oldNode.type === newNode.type) &#123;</span><br><span class="line">        let attr = diffAttr(oldNode.props, newNode.props);</span><br><span class="line">        if (Object.keys(attr).length &gt; 0) &#123;</span><br><span class="line">            current.push(&#123; type: &apos;ATTR&apos;, attr &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        diffChildren(oldNode.children, newNode.children, patches);</span><br><span class="line">    &#125; else &#123;    // 说明节点被替换了</span><br><span class="line">        current.push(&#123; type: &apos;REPLACE&apos;, newNode&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // current element has patch</span><br><span class="line">    if (current.length) &#123;</span><br><span class="line">        patches[index] = current;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isString(obj) &#123;</span><br><span class="line">    return typeof obj === &apos;string&apos;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function diffAttr(oldAttrs, newAttrs) &#123;</span><br><span class="line">    let patch = &#123;&#125;;</span><br><span class="line">    for (let key in oldAttrs) &#123;</span><br><span class="line">        if (oldAttrs[key] !== newAttrs[key]) &#123;</span><br><span class="line">            patch[key] = newAttrs[key]; // could be undefined</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (let key in newAttrs) &#123;</span><br><span class="line">        if (!oldAttrs.hasOwnProperty(key)) &#123;</span><br><span class="line">            patch[key] = newAttrs[key];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return patch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let num = 0;</span><br><span class="line"></span><br><span class="line">function diffChildren(oldChildren, newChildren, patches) &#123;</span><br><span class="line">    oldChildren.forEach((child, index) =&gt; &#123;</span><br><span class="line">        walk(child, newChildren[index], ++num, patches);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default diff;</span><br></pre></td></tr></table></figure>

<h3 id="patch"><a href="#patch" class="headerlink" title="patch"></a>patch</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Element, render, setAttr &#125; from &apos;./element&apos;;</span><br><span class="line"></span><br><span class="line">let allPatches;</span><br><span class="line">let index = 0;</span><br><span class="line"></span><br><span class="line">function patch(node, patches) &#123;</span><br><span class="line">    allPatches = patches;</span><br><span class="line"></span><br><span class="line">    // patch one element</span><br><span class="line">    walk(node);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function walk(node) &#123;</span><br><span class="line">    let current = allPatches[index++];</span><br><span class="line">    let childNodes = node.childNodes;</span><br><span class="line"></span><br><span class="line">    childNodes.forEach(child =&gt; walk(child));</span><br><span class="line"></span><br><span class="line">    if (current) &#123;</span><br><span class="line">        doPatch(node, current);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function doPatch(node, patches) &#123;</span><br><span class="line">    patches.forEach(patch =&gt; &#123;</span><br><span class="line">        switch (patch.type) &#123;</span><br><span class="line">            case &apos;ATTR&apos;:</span><br><span class="line">                for (let key in patch.attr) &#123;</span><br><span class="line">                    let value = patch.attr[key];</span><br><span class="line">                    if (value) &#123;</span><br><span class="line">                        setAttr(node, key, value);</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        node.removeAttribute(key);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            case &apos;TEXT&apos;:</span><br><span class="line">                node.textContent = patch.text;</span><br><span class="line">                break;</span><br><span class="line">            case &apos;REPLACE&apos;:</span><br><span class="line">                let newNode = patch.newNode;</span><br><span class="line">                newNode = (newNode instanceof Element) ? render(newNode) : document.createTextNode(newNode);</span><br><span class="line">                node.parentNode.replaceChild(newNode, node);</span><br><span class="line">                break;</span><br><span class="line">            case &apos;REMOVE&apos;:</span><br><span class="line">                node.parentNode.removeChild(node);</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default patch;</span><br></pre></td></tr></table></figure>

<h3 id="regression"><a href="#regression" class="headerlink" title="regression"></a>regression</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// index.js</span><br><span class="line"></span><br><span class="line">import &#123; createElement, render, renderDom &#125; from &apos;./element&apos;;</span><br><span class="line">// +++</span><br><span class="line">import diff from &apos;./diff&apos;;</span><br><span class="line">import patch from &apos;./patch&apos;;</span><br><span class="line">// +++</span><br><span class="line"></span><br><span class="line">let virtualDom = createElement(&apos;ul&apos;, &#123;class: &apos;list&apos;&#125;, [</span><br><span class="line">    createElement(&apos;li&apos;, &#123;class: &apos;item&apos;&#125;, [&apos;A&apos;]),</span><br><span class="line">    createElement(&apos;li&apos;, &#123;class: &apos;item&apos;&#125;, [&apos;B&apos;]),</span><br><span class="line">    createElement(&apos;li&apos;, &#123;class: &apos;item&apos;&#125;, [&apos;C&apos;])</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">let el = render(virtualDom);</span><br><span class="line">renderDom(el, window.root);</span><br><span class="line"></span><br><span class="line">// +++</span><br><span class="line">// create a new Virtual DOM</span><br><span class="line">let virtualDom2 = createElement(&apos;ul&apos;, &#123;class: &apos;list-group&apos;&#125;, [</span><br><span class="line">    createElement(&apos;li&apos;, &#123;class: &apos;item active&apos;&#125;, [&apos;a&apos;]),</span><br><span class="line">    createElement(&apos;li&apos;, &#123;class: &apos;item&apos;&#125;, [&apos;b&apos;]),</span><br><span class="line">    createElement(&apos;li&apos;, &#123;class: &apos;item&apos;&#125;, [&apos;c&apos;])</span><br><span class="line">]);</span><br><span class="line">// diff two Virtual DOM</span><br><span class="line">let patches = diff(virtualDom, virtualDom2);</span><br><span class="line">// patch to element</span><br><span class="line">patch(el, patches);</span><br><span class="line">// +++</span><br></pre></td></tr></table></figure>

<h2 id="State-and-Props"><a href="#State-and-Props" class="headerlink" title="State and Props"></a>State and Props</h2><h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><p>State of a component is an object that holds some information that may change over the lifetime of the component.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class User extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">     super(props);</span><br><span class="line"></span><br><span class="line">     this.state = &#123;</span><br><span class="line">        message: &quot;Welcome to React world&quot;,</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">     return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">           &lt;h1&gt;&#123;this.state.message&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">     );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h3><p>Props are inputs to a React component. They are single values or objects containing a set of values that are passed to React Components. i.e, They are data passed down from a parent component to a child component.<br>The primary purpose of props in React is to provide following component functionality:</p>
<ul>
<li>Pass custom data to your React component.</li>
<li>Trigger state changes.</li>
<li>Use via this.props.reactProp inside component’s render() method.</li>
</ul>
<p>Both props and state are plain JavaScript objects. While both of them hold information that influences the output of render, they are different in their functionality with respect to component. i.e,</p>
<ul>
<li>Props get passed to the component similar to function parameters</li>
<li>state is managed within the component similar to variables declared within a function.</li>
</ul>
<p>The state is a data structure that starts with a default value when a Component mounts. It may be mutated across time, mostly as a result of user events.<br>Props are a Component’s configuration. They are received from above and immutable as far as the Component receiving them is concerned. A Component cannot change its props, but it is responsible for putting together the props of its child Components. Props do not have to just be data - callback functions may be passed in as props.</p>
<h2 id="The-major-features-of-React"><a href="#The-major-features-of-React" class="headerlink" title="The major features of React"></a>The major features of React</h2><ul>
<li>It uses VirtualDOM instead RealDOM considering that RealDOM manipulations are expensive.</li>
<li>Supports server-side rendering</li>
<li>Follows Unidirectional data flow or data binding</li>
<li>Uses reusable/composable UI components to develop the view</li>
</ul>
<h3 id="Advantages"><a href="#Advantages" class="headerlink" title="Advantages"></a>Advantages</h3><ul>
<li>Increases the application’s performance with Virtual DOM</li>
<li>It is easy to know how a component is rendered, you just need to look at the render function.</li>
<li>JSX makes code is easy to read and write. It is also really easy to see the layout, or how components are plugged/combined with each other.</li>
<li>It renders both on client and server side. This enables improves SEO and performance.</li>
<li>Easy to integrate with other frameworks since it is only a view library</li>
<li>Easy to write UI Test cases and integration with tools such as JEST.</li>
</ul>
<h3 id="Limitations"><a href="#Limitations" class="headerlink" title="Limitations"></a>Limitations</h3><ul>
<li>React is just a view library, not a full-blown framework</li>
<li>There is a learning curve for beginners who are new to web development.</li>
<li>Integrating React.js into a traditional MVC framework requires some additional configuration.</li>
<li>The code complexity increases with inline template and JSX.</li>
<li>Too many smaller components leading to over-engineering or boilerplate</li>
</ul>
<h2 id="What-happens-during-the-lifecycle-of-a-React-component"><a href="#What-happens-during-the-lifecycle-of-a-React-component" class="headerlink" title="What happens during the lifecycle of a React component?"></a>What happens during the lifecycle of a React component?</h2><p>At the highest level, React components have lifecycle events that fall into three general categories:</p>
<p><img src="lifecycle.png" alt="img"></p>
<h3 id="Mounting"><a href="#Mounting" class="headerlink" title="Mounting"></a>Mounting</h3><ul>
<li><p>constructor()<br>If you don’t initialize state and you don’t bind methods, you don’t need to implement a constructor for your React component.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">constructor(props) &#123;</span><br><span class="line">  super(props);</span><br><span class="line">  // Don&apos;t call this.setState() here!</span><br><span class="line">  this.state = &#123; counter: 0 &#125;;</span><br><span class="line">  this.handleClick = this.handleClick.bind(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>static getDerivedStateFromProps()<br><code>static getDerivedStateFromProps(props, state)</code> is invoked right before calling the render method, both on the initial mount and on subsequent updates. It should return an object to update the state, or null to update nothing. This method exists for rare use cases where the state depends on changes in props over time. Note that this method is fired on every render, regardless of the cause.</p>
</li>
<li><p>render()<br>The render() method is the only required method in a class component. The render() function should be pure, meaning that it does not modify component state, it returns the same result each time it’s invoked, and it does not directly interact with the browser. If you need to interact with the browser, perform your work in componentDidMount().</p>
</li>
<li><p>componentDidMount()<br>componentDidMount() is invoked immediately after a component is mounted. Initialization that requires DOM nodes should go here. This method is a good place to set up any subscriptions. If you do that, don’t forget to unsubscribe in componentWillUnmount().<br>You may call setState() immediately in componentDidMount(). It will trigger an extra rendering, but it will happen before the browser updates the screen. This guarantees that even though the render() will be called twice in this case, the user won’t see the intermediate state. Use this pattern with caution because it often causes performance issues. In most cases, you should be able to assign the initial state in the constructor() instead.</p>
</li>
</ul>
<h3 id="Updating"><a href="#Updating" class="headerlink" title="Updating"></a>Updating</h3><ul>
<li><p>static getDerivedStateFromProps()</p>
</li>
<li><p>shouldComponentUpdate()<br><code>shouldComponentUpdate(nextProps, nextState)</code> is invoked before rendering when new props or state are being received. Use shouldComponentUpdate() to let React know if a component’s output is not affected by the current change in state or props. The default behavior is to re-render on every state change.</p>
</li>
<li><p>render()</p>
</li>
<li><p>getSnapshotBeforeUpdate()<br><code>getSnapshotBeforeUpdate(prevProps, prevState)</code> is invoked right before the most recently rendered output is committed to e.g. the DOM. It enables your component to capture some information from the DOM (e.g. scroll position) before it is potentially changed. Any value returned by this lifecycle will be passed as a parameter to componentDidUpdate().</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">class ScrollingList extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.listRef = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getSnapshotBeforeUpdate(prevProps, prevState) &#123;</span><br><span class="line">    // Are we adding new items to the list?</span><br><span class="line">    // Capture the scroll position so we can adjust scroll later.</span><br><span class="line">    if (prevProps.list.length &lt; this.props.list.length) &#123;</span><br><span class="line">      const list = this.listRef.current;</span><br><span class="line">      return list.scrollHeight - list.scrollTop;</span><br><span class="line">    &#125;</span><br><span class="line">    return null;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidUpdate(prevProps, prevState, snapshot) &#123;</span><br><span class="line">    // If we have a snapshot value, we&apos;ve just added new items.</span><br><span class="line">    // Adjust scroll so these new items don&apos;t push the old ones out of view.</span><br><span class="line">    // (snapshot here is the value returned from getSnapshotBeforeUpdate)</span><br><span class="line">    if (snapshot !== null) &#123;</span><br><span class="line">      const list = this.listRef.current;</span><br><span class="line">      list.scrollTop = list.scrollHeight - snapshot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div ref=&#123;this.listRef&#125;&gt;&#123;/* ...contents... */&#125;&lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>componentDidUpdate()<br><code>componentDidUpdate(prevProps, prevState, snapshot)</code> is invoked immediately after updating occurs. This method is not called for the initial render.<br>Use this as an opportunity to operate on the DOM when the component has been updated. This is also a good place to do network requests as long as you compare the current props to previous props.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">componentDidUpdate(prevProps) &#123;</span><br><span class="line">  // Typical usage (don&apos;t forget to compare props):</span><br><span class="line">  if (this.props.userID !== prevProps.userID) &#123;</span><br><span class="line">    this.fetchData(this.props.userID);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Unmounting"><a href="#Unmounting" class="headerlink" title="Unmounting"></a>Unmounting</h3><p>componentWillUnmount() is invoked immediately before a component is unmounted and destroyed. Perform any necessary cleanup in this method, such as invalidating timers, canceling network requests, or cleaning up any subscriptions that were created in componentDidMount().</p>
<p>These methods are considered legacy and you should avoid them in new code:</p>
<ul>
<li>UNSAFE_componentWillMount()<br>UNSAFE_componentWillMount() is invoked just before mounting occurs. It is called before render(), therefore calling setState() synchronously in this method will not trigger an extra rendering. Generally, we recommend using the constructor() instead for initializing state.</li>
<li>UNSAFE_componentWillUpdate()<br>UNSAFE_componentWillUpdate() is invoked just before rendering when new props or state are being received. Note that you cannot call this.setState() here; nor should you do anything else (e.g. dispatch a Redux action) that would trigger an update to a React component before UNSAFE_componentWillUpdate() returns. Typically, this method can be replaced by componentDidUpdate().</li>
<li>UNSAFE_componentWillReceiveProps()<br>UNSAFE_componentWillReceiveProps() is invoked before a mounted component receives new props. If you need to update the state in response to prop changes, you may compare this.props and nextProps and perform state transitions using this.setState() in this method.</li>
</ul>
<h2 id="What-is-the-purpose-of-using-super-constructor-with-props-argument"><a href="#What-is-the-purpose-of-using-super-constructor-with-props-argument" class="headerlink" title="What is the purpose of using super constructor with props argument?"></a>What is the purpose of using super constructor with props argument?</h2><p>A child class constructor cannot make use of this reference until super() method has been called. The same applies for ES6 sub-classes as well. The main reason of passing props parameter to super() call is to access this.props in your child constructors.<br>Passing props:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class MyComponent extends React.Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props);</span><br><span class="line">        console.log(this.props);  // Prints &#123; name: &apos;sudheer&apos;,age: 30 &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Not passing props:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class MyComponent extends React.Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super();</span><br><span class="line">        console.log(this.props); // Prints undefined</span><br><span class="line">        // But Props parameter is still available</span><br><span class="line">        console.log(props); // Prints &#123; name: &apos;sudheer&apos;,age: 30 &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        // No difference outside constructor</span><br><span class="line">        console.log(this.props) // Prints &#123; name: &apos;sudheer&apos;,age: 30 &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="When-to-use-a-Class-Component-over-a-Functional-Component"><a href="#When-to-use-a-Class-Component-over-a-Functional-Component" class="headerlink" title="When to use a Class Component over a Functional Component?"></a>When to use a Class Component over a Functional Component?</h2><p>Class components allows you to use additional features such as local state and lifecycle hooks. Also, to enable your component to have direct access to your store and thus holds state.<br>When your component just receives props and renders them to the page, this is a stateless component, for which a pure function can be used. These are also called dumb components or presentational components.<br>If the component need state or lifecycle methods then use class component otherwise use functional component.</p>
<ul>
<li><p>Functional components:<br>This is the simplest way to create ReactJS components. It accepts props as an Object and returns ReactJS elements.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function Greeting(props) &#123;</span><br><span class="line">  return &lt;h1&gt; Hello, &#123;props.message&#125;&lt;/h1&gt; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Class components:<br>You can also use Es6 class to define component.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class Greeting extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;h1&gt;Hello, &#123;this.props.message&#125;&lt;/h1&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="What-are-stateless-components-and-stateful-components"><a href="#What-are-stateless-components-and-stateful-components" class="headerlink" title="What are stateless components and stateful components?"></a>What are stateless components and stateful components?</h2><ul>
<li><p>If the behavior is independent of its state then it can be a stateless component. You can use either a function or a class for creating stateless components. But unless you need to use a lifecycle hook in your components, you should go for stateless functional components. There are a lot of benefits if you decide to use stateless functional components here; they are easy to write, understand, and test, and you can avoid the this keyword altogether.</p>
</li>
<li><p>If the behavior of a component is dependent on the state of the component then it can be termed as stateful component. These Stateful components are always class components and have a state that gets initialized in the constructor.</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class App extends Component &#123;</span><br><span class="line"> constructor(props) &#123;</span><br><span class="line">  super(props);</span><br><span class="line">  this.state = &#123; count: 0 &#125;;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> render() &#123;</span><br><span class="line">    // omitted for brevity</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="React-Hook"><a href="#React-Hook" class="headerlink" title="React Hook"></a>React Hook</h2><p>Hooks are a new addition in React 16.8. They let you use state and other React features without writing a class.</p>
<h3 id="State-Hook"><a href="#State-Hook" class="headerlink" title="State Hook"></a>State Hook</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; useState &#125; from &apos;react&apos;;</span><br><span class="line"></span><br><span class="line">function Example() &#123;</span><br><span class="line">  // Declare a new state variable, which we&apos;ll call &quot;count&quot;</span><br><span class="line">  const [count, setCount] = useState(0);</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Effect-Hook"><a href="#Effect-Hook" class="headerlink" title="Effect Hook"></a>Effect Hook</h3><p>The Effect Hook, useEffect, adds the ability to perform side effects from a function component. It serves the same purpose as componentDidMount, componentDidUpdate, and componentWillUnmount in React classes, but unified into a single API.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; useState, useEffect &#125; from &apos;react&apos;;</span><br><span class="line"></span><br><span class="line">function Example() &#123;</span><br><span class="line">  const [count, setCount] = useState(0);</span><br><span class="line"></span><br><span class="line">  // Similar to componentDidMount and componentDidUpdate:</span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    // Update the document title using the browser API</span><br><span class="line">    document.title = `You clicked $&#123;count&#125; times`;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;</span><br><span class="line">        Click me</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Rules-of-Hooks"><a href="#Rules-of-Hooks" class="headerlink" title="Rules of Hooks"></a>Rules of Hooks</h3><ul>
<li>Only Call Hooks at the Top Level</li>
<li>Only Call Hooks from React Functions</li>
</ul>
<h2 id="What-happens-when-you-call-“setState”"><a href="#What-happens-when-you-call-“setState”" class="headerlink" title="What happens when you call “setState”?"></a>What happens when you call “setState”?</h2><p>The first thing React will do when setState is called is merge the object you passed into setState into the current state of the component. This will kick off a process called reconciliation. The end goal of reconciliation is to, in the most efficient way possible, update the UI based on this new state.<br>To do this, React will construct a new tree of React elements. Once it has this tree, in order to figure out how the UI should change in response to the new state, React will diff this new tree against the previous element tree.<br>By doing this, React will then know the exact changes which occurred, and by knowing exactly what changes occurred, will able to minimize its footprint on the UI by only making updates where absolutely necessary.</p>
<h3 id="reconciliation"><a href="#reconciliation" class="headerlink" title="reconciliation"></a>reconciliation</h3><p>When a component’s props or state change, React decides whether an actual DOM update is necessary by comparing the newly returned element with the previously rendered one. When they are not equal, React will update the DOM. This process is called reconciliation.</p>
<h3 id="callback-function-as-an-argument-of-setState"><a href="#callback-function-as-an-argument-of-setState" class="headerlink" title="callback function as an argument of setState"></a>callback function as an argument of setState</h3><p>The callback function is invoked when setState finished and the component gets rendered. Since setState is asynchronous the callback function is used for any post action.<br>Note: It is recommended to use lifecycle method rather this callback function.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setState(</span><br><span class="line">  &#123;</span><br><span class="line">    name: &apos;sudheer&apos;</span><br><span class="line">  &#125;, () =&gt; console.log(&apos;The name has updated and component re-rendered&apos;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="What-is-the-difference-between-a-Presentational-component-and-a-Container-component"><a href="#What-is-the-difference-between-a-Presentational-component-and-a-Container-component" class="headerlink" title="What is the difference between a Presentational component and a Container component?"></a>What is the difference between a Presentational component and a Container component?</h2><p>Presentational components are concerned with how things look. They generally receive data and callbacks exclusively via props. These components rarely have their own state, but when they do it generally concerns UI state, as opposed to data state.</p>
<p>Container components are more concerned with how things work. These components provide the data and behavior to presentational or other container components. They call actions and provide these as callbacks to the presentational components. They are also often stateful as they serve as data sources.</p>
<h2 id="Keys"><a href="#Keys" class="headerlink" title="Keys"></a>Keys</h2><p>Keys help React identify which items have changed, are added, or are removed. Keys should be given to the elements inside the array to give the elements a stable identity. The best way to pick a key is to use a string that uniquely identifies a list item among its siblings.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &#123;this.state.todoItems.map((&#123;task, uid&#125;) =&gt; &#123;</span><br><span class="line">        return &lt;li key=&#123;uid&#125;&gt;&#123;task&#125;&lt;/li&gt;</span><br><span class="line">      &#125;)&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Most often you would use IDs from your data as keys. When you don’t have stable IDs for rendered items, you may use the item index as a key as a last resort. It is not recommend to use indexes for keys if the items can reorder, as that would be slow.</p>
<h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><p>The ref is used to return a reference to the element. They should be avoided in most cases, however, they can be useful when we need direct access to DOM element or an instance of a component.<br>There are 3 type of ref.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// string ref</span><br><span class="line">class MyComponent extends React.Component &#123;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    this.refs.myRef.focus();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;input ref=&quot;myRef&quot; /&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// callback ref</span><br><span class="line">class MyComponent extends React.Component &#123;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    this.myRef.focus();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;input ref=&#123;(ele) =&gt; &#123;</span><br><span class="line">      this.myRef = ele;</span><br><span class="line">    &#125;&#125; /&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// React.createRef</span><br><span class="line">class MyComponent extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.myRef = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    this.myRef.current.focus();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;input ref=&#123;this.myRef&#125; /&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Questions/" rel="tag"><i class="fa fa-tag"></i> Questions</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/11/04/javascript-questions/" rel="next" title="Questions - JavaScript">
                <i class="fa fa-chevron-left"></i> Questions - JavaScript
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/11/09/vue-questions/" rel="prev" title="Questions - Vue">
                Questions - Vue <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Fanjia Kong</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:kfj0116@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i></a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#How-does-React-work"><span class="nav-number">1.</span> <span class="nav-text">How does React work?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#create-a-virtual-DOM"><span class="nav-number">1.1.</span> <span class="nav-text">create a virtual DOM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#diff-algorithm"><span class="nav-number">1.2.</span> <span class="nav-text">diff algorithm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#patch"><span class="nav-number">1.3.</span> <span class="nav-text">patch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#regression"><span class="nav-number">1.4.</span> <span class="nav-text">regression</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#State-and-Props"><span class="nav-number">2.</span> <span class="nav-text">State and Props</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#State"><span class="nav-number">2.1.</span> <span class="nav-text">State</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Props"><span class="nav-number">2.2.</span> <span class="nav-text">Props</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-major-features-of-React"><span class="nav-number">3.</span> <span class="nav-text">The major features of React</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Advantages"><span class="nav-number">3.1.</span> <span class="nav-text">Advantages</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Limitations"><span class="nav-number">3.2.</span> <span class="nav-text">Limitations</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What-happens-during-the-lifecycle-of-a-React-component"><span class="nav-number">4.</span> <span class="nav-text">What happens during the lifecycle of a React component?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Mounting"><span class="nav-number">4.1.</span> <span class="nav-text">Mounting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Updating"><span class="nav-number">4.2.</span> <span class="nav-text">Updating</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Unmounting"><span class="nav-number">4.3.</span> <span class="nav-text">Unmounting</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What-is-the-purpose-of-using-super-constructor-with-props-argument"><span class="nav-number">5.</span> <span class="nav-text">What is the purpose of using super constructor with props argument?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#When-to-use-a-Class-Component-over-a-Functional-Component"><span class="nav-number">6.</span> <span class="nav-text">When to use a Class Component over a Functional Component?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What-are-stateless-components-and-stateful-components"><span class="nav-number">7.</span> <span class="nav-text">What are stateless components and stateful components?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React-Hook"><span class="nav-number">8.</span> <span class="nav-text">React Hook</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#State-Hook"><span class="nav-number">8.1.</span> <span class="nav-text">State Hook</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Effect-Hook"><span class="nav-number">8.2.</span> <span class="nav-text">Effect Hook</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rules-of-Hooks"><span class="nav-number">8.3.</span> <span class="nav-text">Rules of Hooks</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What-happens-when-you-call-“setState”"><span class="nav-number">9.</span> <span class="nav-text">What happens when you call “setState”?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#reconciliation"><span class="nav-number">9.1.</span> <span class="nav-text">reconciliation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#callback-function-as-an-argument-of-setState"><span class="nav-number">9.2.</span> <span class="nav-text">callback function as an argument of setState</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What-is-the-difference-between-a-Presentational-component-and-a-Container-component"><span class="nav-number">10.</span> <span class="nav-text">What is the difference between a Presentational component and a Container component?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Keys"><span class="nav-number">11.</span> <span class="nav-text">Keys</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Refs"><span class="nav-number">12.</span> <span class="nav-text">Refs</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fanjia Kong</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
